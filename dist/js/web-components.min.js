angular.module("fluid.webComponents.fluidCache",[]).service("fluidCache.service",["$templateCache",function(tc){return this.getCache=function(key){return tc.get(key)},this.putCache=function(key,data){tc.put(key,data),console.debug("fluidCache.service.put.key",key),console.debug("fluidCache.service.put.data",data)},this}]).factory("fluidCache.injector",["fluidCache.service",function(fs){return{response:function(response){return console.debug("fluidCache.injector.response",response),fs.getCache(response.config.url)===!1&&fs.putCache(response.config.url,response.data),response}}}]).directive("fluidCache",["fluidCache.service","$compile",function(fs){return{restrict:"A",link:function(scope,element,attr){element.ready(function(){var obj=scope.$$childHead.$eval(attr.fluidCache);console.debug("fluidCache.cache",obj),obj&&fs.putCache(obj,!1)})}}}]).config(["$httpProvider",function(hp){hp.interceptors.push("fluidCache.injector")}]),angular.module("fluid.webComponents.fluidSelect",[]).directive("fluidSelect",["$templateCache","$http","$compile",function(tc,h,c){return{scope:{model:"=",label:"@",fieldGroup:"@",fieldValue:"@",fieldLabel:"@",sourceUrl:"@",change:"&",name:"@",method:"@"},restrict:"AE",replace:!0,template:tc.get("templates/fluid-select.html"),link:function(scope,element,attr){scope.loaded=!1,scope.load=function(){scope.sourceUrl?(scope.isLoading=!0,h({method:scope.method,url:scope.sourceUrl}).success(function(sourceList){scope.sourceList=sourceList,scope.addElements(),c(dropDown.contents())(scope),scope.isLoading=!1,scope.loaded=!0})):attr.values&&(scope.isLoading=!0,scope.sourceList=attr.values.split(","),scope.addElements(),c(dropDown.contents())(scope),scope.isLoading=!1,scope.loaded=!0)},scope.method||(scope.method="GET"),!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_")),scope.options="item in sourceList",scope.fieldGroup&&(scope.options+="  | groupBy "+scope.fieldGroup);var itemLabel=scope.fieldLabel?"{{item."+scope.fieldLabel+"}}":"{{item}}",itemValue=scope.fieldValue?"item."+scope.fieldValue:"item",dropDown=element.find("ul.dropdown-menu"),label=element.find("span.label");label.attr("ng-if","model"),scope.fieldValue?label.attr("ng-repeat","item in sourceList | filter : {"+scope.fieldValue+": model}"):label.attr("ng-repeat","item in sourceList | filter : model"),label.html(itemLabel),c(label)(scope),scope.addElements=function(){var listElements=$("<li>").addClass("fluid-select-item").attr("ng-repeat",scope.options).appendTo(dropDown);$("<a>").attr("ng-click","select("+itemValue+",item,$index)").addClass("morris-hover-point").text(itemLabel).appendTo(listElements)},scope.$watch(function(scope){return scope.sourceUrl},function(value){scope.loaded=!1}),scope.$watch(function(){return attr.values},function(value){scope.loaded=!1}),scope.select=function(item,full,$index){scope.model=item,scope.change({item:item,full:full,index:$index})},scope.$watch(function(scope){return scope.model},function(value){value&&(scope.loaded||scope.load())}),scope.look=function(){scope.loaded||scope.load()}}}}]),angular.module("fluid.webComponents.bootstrap",[]).directive("info",[function(){return{restrict:"A",link:function(scope,element){element.hasClass("fluid-select")?element.find(".dropdown-toggle").addClass("btn-info"):element.hasClass("btn")?element.addClass("btn-info"):element.hasClass("panel")&&element.addClass("panel-info")}}}]).directive("warning",[function(){return{restrict:"A",link:function(scope,element){element.hasClass("fluid-select")?element.find(".dropdown-toggle").addClass("btn-warning"):element.hasClass("btn")?element.addClass("btn-warning"):element.hasClass("panel")&&element.addClass("panel-warning")}}}]).directive("danger",[function(){return{restrict:"A",link:function(scope,element){element.hasClass("fluid-select")?element.find(".dropdown-toggle").addClass("btn-danger"):element.hasClass("btn")?element.addClass("btn-danger"):element.hasClass("panel")&&element.addClass("panel-danger")}}}]).directive("success",[function(){return{restrict:"A",link:function(scope,element){element.hasClass("fluid-select")?element.find(".dropdown-toggle").addClass("btn-success"):element.hasClass("btn")?element.addClass("btn-success"):element.hasClass("panel")&&element.addClass("panel-success")}}}]).directive("primary",[function(){return{restrict:"A",link:function(scope,element){element.hasClass("fluid-select")?element.find(".dropdown-toggle").addClass("btn-primary"):element.hasClass("btn")?element.addClass("btn-primary"):element.hasClass("panel")&&element.addClass("panel-primary")}}}]),angular.module("fluid.webComponents",["angular.filter","fluid.webComponents.bootstrap","fluid.webComponents.fluidCache","fluid.webComponents.fluidSelect","wcTemplates"]).directive("fluidDisabled",[function(){return{restrict:"A",link:function(scope,element,attr){scope.$watch(attr.fluidDisabled,function(disabled){disabled?(element.find("input").each(function(){$(this).attr("disabled","")}),element.find("button").each(function(){$(this).attr("disabled","")}),element.find("a").each(function(){$(this).attr("disabled","")})):(element.find("input").each(function(){$(this).removeAttr("disabled")}),element.find("button").each(function(){$(this).removeAttr("disabled")}),element.find("a").each(function(){$(this).removeAttr("disabled")}))})}}}]).controller("sampleCtrl",["$scope",function(scope){}]),angular.module("wcTemplates",["templates/fluid-select.html"]),angular.module("templates/fluid-select.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid-select.html",'<label class="control-label fluid-select">{{label}}<div class="btn-group fluid-select-dropdown"><button class="btn dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" ng-click="look()" aria-expanded="false"><span class="label"></span> <span ng-if="!model">...</span> <span class="caret"></span></button><ul class="dropdown-menu"><li ng-if="isLoading"><a>Loading {{label ? label : \'selection\'}} <i class="fa fa-spinner fa-spin"></i></a></li></ul></div></label>')}]);